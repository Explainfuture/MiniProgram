<!--pages/character/character.wxml-->
<view class="container">
  <!-- 搜索区域 -->
  <view class="search-section">
    <view class="search-container">
      <input 
        class="search-input" 
        placeholder="搜索角色名字..." 
        value="{{searchKeyword}}"
        bindinput="onSearchInput"
        bindconfirm="onSearchConfirm"
        confirm-type="search"
      />
      <image class="search-icon" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE1LjUgMTRIMTQuNzFMMTQuNDMgMTMuNzNDMTUuNDEgMTIuNTkgMTYgMTEuMTEgMTYgOS41QzE2IDUuOTEgMTMuMDkgMyA5LjUgM0M1LjkxIDMgMyA1LjkxIDMgOS41QzMgMTMuMDkgNS45MSAxNiA5LjUgMTZDMTEuMTEgMTYgMTIuNTkgMTUuNDEgMTMuNzMgMTQuNDNMMTQgMTQuNzFWMTUuNUwxOSAyMC40OUwyMC40OSAxOUwxNS41IDE0Wk05LjUgMTRDNy4wMSAxNCA1IDExLjk5IDUgOS41QzUgNy4wMSA3LjAxIDUgOS41IDVDMTEuOTkgNSAxNCA3LjAxIDE0IDkuNUMxNCAxMS45OSAxMS45OSAxNCA5LjUgMTRaIiBmaWxsPSIjOTk5OTk5Ii8+Cjwvc3ZnPgo=" mode="aspectFit"></image>
    </view>
  </view>

  <!-- 人物列表 -->
  <view class="characters-section">
    <view class="section-header">
      <text class="section-title">角色列表</text>
      <text class="character-count">共{{filteredCharacters.length}}个角色</text>
    </view>
    
    <!-- 加载状态 -->
    <view wx:if="{{loading}}" class="loading">
      <text>加载中...</text>
    </view>
    
    <!-- 空状态 -->
    <view wx:elif="{{filteredCharacters.length === 0}}" class="empty-state">
      <image class="empty-icon" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTMyIDU2QzQ0LjE1MDMgNTYgNTQgNDYuMTUwMyA1NCAzNEM1NCAyMS44NDk3IDQ0LjE1MDMgMTIgMzIgMTJDMTkuODQ5NyAxMiAxMCAyMS44NDk3IDEwIDM0QzEwIDQ2LjE1MDMgMTkuODQ5NyA1NiAzMiA1NloiIGZpbGw9IiNEOUQ5RDkiLz4KPHBhdGggZD0iTTMyIDQ4QzM5LjczMTkgNDggNDYgNDEuNzMxOSA0NiAzNEM0NiAyNi4yNjgxIDM5LjczMTkgMjAgMzIgMjBDMjQuMjY4MSAyMCAxOCAyNi4yNjgxIDE4IDM0QzE4IDQxLjczMTkgMjQuMjY4MSA0OCAzMiA0OFoiIGZpbGw9IiNGRkZGRkYiLz4KPHBhdGggZD0iTTI4IDMwSDM2VjM4SDI4VjMwWiIgZmlsbD0iI0Q5RDlEOSIvPgo8L3N2Zz4K" mode="aspectFit"></image>
      <text class="empty-text">{{searchKeyword ? '没有找到相关角色' : '暂无角色数据'}}</text>
    </view>
    
    <!-- 角色网格 -->
    <view wx:else class="characters-grid">
      <view 
        wx:for="{{filteredCharacters}}" 
        wx:key="id" 
        class="character-card card"
        bindtap="onCharacterTap"
        data-character="{{item}}"
      >
        <view class="character-avatar-container">
          <image 
            class="character-avatar" 
            src="{{item.avatar}}" 
            mode="aspectFill"
            lazy-load
          ></image>
          <view class="character-badge" wx:if="{{item.isMain}}">主角</view>
        </view>
        <view class="character-info">
          <text class="character-name">{{item.name}}</text>
          <text class="character-title">{{item.title}}</text>
          <text class="character-description">{{item.shortDescription}}</text>
        </view>
        <view class="character-tags">
          <text 
            wx:for="{{item.tags}}" 
            wx:key="*this" 
            wx:for-item="tag"
            class="character-tag"
          >{{tag}}</text>
        </view>
      </view>
    </view>
  </view>
</view>
