<!--pages/share/share.wxml-->
<view class="container">
  <!-- å‘å¸ƒæŒ‰é’® -->
  <view class="publish-header">
    <button class="publish-btn btn btn-primary" bindtap="goToPublish">
      <text class="publish-icon">âœï¸</text>
      <text>å‘å¸ƒæ–°å†…å®¹</text>
    </button>
  </view>

  <!-- åˆ†äº«åˆ—è¡¨ -->
  <view class="shares-section">
    <view class="section-header">
      <text class="section-title">åˆ†äº«åŠ¨æ€</text>
      <text class="shares-count">å…±{{shares.length}}æ¡åŠ¨æ€</text>
    </view>
    
    <!-- åŠ è½½çŠ¶æ€ -->
    <view wx:if="{{loading}}" class="loading">
      <text>åŠ è½½ä¸­...</text>
    </view>
    
    <!-- ç©ºçŠ¶æ€ -->
    <view wx:elif="{{shares.length === 0}}" class="empty-state">
      <image class="empty-icon" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTMyIDU2QzQ0LjE1MDMgNTYgNTQgNDYuMTUwMyA1NCAzNEM1NCAyMS44NDk3IDQ0LjE1MDMgMTIgMzIgMTJDMTkuODQ5NyAxMiAxMCAyMS44NDk3IDEwIDM0QzEwIDQ2LjE1MDMgMTkuODQ5NyA1NiAzMiA1NloiIGZpbGw9IiNEOUQ5RDkiLz4KPHBhdGggZD0iTTMyIDQ4QzM5LjczMTkgNDggNDYgNDEuNzMxOSA0NiAzNEM0NiAyNi4yNjgxIDM5LjczMTkgMjAgMzIgMjBDMjQuMjY4MSAyMCAxOCAyNi4yNjgxIDE4IDM0QzE4IDQxLjczMTkgMjQuMjY4MSA0OCAzMiA0OFoiIGZpbGw9IiNGRkZGRkYiLz4KPHBhdGggZD0iTTI4IDMwSDM2VjM4SDI4VjMwWiIgZmlsbD0iI0Q5RDlEOSIvPgo8L3N2Zz4K" mode="aspectFit"></image>
      <text class="empty-text">è¿˜æ²¡æœ‰åˆ†äº«å†…å®¹ï¼Œå¿«æ¥å‘å¸ƒç¬¬ä¸€æ¡å§ï¼</text>
    </view>
    
    <!-- åˆ†äº«åˆ—è¡¨ -->
    <view wx:else class="shares-list">
      <view 
        wx:for="{{shares}}" 
        wx:key="id" 
        class="share-item card"
        bindtap="onShareTap"
        data-share="{{item}}"
      >
        <!-- ç”¨æˆ·ä¿¡æ¯ -->
        <view class="share-header">
          <view class="user-info">
            <image class="user-avatar" src="{{item.userAvatar}}" mode="aspectFill"></image>
            <view class="user-details">
              <text class="user-name">{{item.userName}}</text>
              <text class="publish-time">{{item.publishTime}}</text>
            </view>
          </view>
          <view class="share-actions">
            <button class="action-btn" bindtap="onLike" data-id="{{item.id}}" catchtap="true">
              <text class="action-icon">{{item.isLiked ? 'â¤ï¸' : 'ğŸ¤'}}</text>
              <text class="action-count">{{item.likeCount}}</text>
            </button>
          </view>
        </view>
        
        <!-- åˆ†äº«å†…å®¹ -->
        <view class="share-content">
          <text class="share-text">{{item.content}}</text>
        </view>
        
        <!-- åˆ†äº«å›¾ç‰‡ -->
        <view class="share-images" wx:if="{{item.images && item.images.length > 0}}">
          <view class="images-grid" wx:if="{{item.images.length === 1}}">
            <image 
              class="single-image" 
              src="{{item.images[0]}}" 
              mode="aspectFill"
              bindtap="previewImages"
              data-current="{{item.images[0]}}"
              data-urls="{{item.images}}"
            ></image>
          </view>
          <view class="images-grid multiple" wx:else>
            <image 
              wx:for="{{item.images}}" 
              wx:key="*this"
              wx:for-item="image"
              class="grid-image" 
              src="{{image}}" 
              mode="aspectFill"
              bindtap="previewImages"
              data-current="{{image}}"
              data-urls="{{item.images}}"
            ></image>
          </view>
        </view>
        
        <!-- åˆ†äº«æ ‡ç­¾ -->
        <view class="share-tags" wx:if="{{item.tags && item.tags.length > 0}}">
          <text 
            wx:for="{{item.tags}}" 
            wx:key="*this" 
            wx:for-item="tag"
            class="share-tag"
          >#{{tag}}</text>
        </view>
      </view>
    </view>
  </view>
</view>
